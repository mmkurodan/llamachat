<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ImageView
        android:id="@+id/ivAvatarBackground"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:contentDescription="@null"
        android:importantForAccessibility="no"
        android:scaleType="centerCrop"
        android:src="@drawable/c0" />

    <FrameLayout
        android:id="@+id/counterpartMiniContainer"
        android:layout_width="96dp"
        android:layout_height="96dp"
        android:layout_gravity="top|end"
        android:layout_marginTop="56dp"
        android:layout_marginEnd="12dp"
        android:visibility="gone">

        <ImageView
            android:id="@+id/ivCounterpartMiniBackground"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@drawable/mini_avatar_round_rect"
            android:clipToOutline="true"
            android:contentDescription="@null"
            android:importantForAccessibility="no"
            android:scaleType="centerCrop"
            android:src="@drawable/c0" />

        <ImageView
            android:id="@+id/ivCounterpartMiniAvatar"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@drawable/mini_avatar_round_rect"
            android:clipToOutline="true"
            android:contentDescription="@null"
            android:importantForAccessibility="no"
            android:scaleType="centerCrop"
            android:src="@drawable/c1" />
    </FrameLayout>

    <ImageView
        android:id="@+id/ivAvatar"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:contentDescription="@string/avatar_description"
        android:scaleType="centerCrop"
        android:src="@drawable/c1" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:weightSum="2">

        <LinearLayout
            android:id="@+id/topPanel"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:orientation="vertical">

            <!-- Header -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:background="#4a90e2"
                android:padding="10dp"
                android:gravity="center_vertical">

                <TextView
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="ðŸ’¬ llama chat"
                    android:textColor="#FFFFFF"
                    android:textSize="18sp"
                    android:textStyle="bold"/>

                <Button
                    android:id="@+id/btnSettings"
                    android:layout_width="wrap_content"
                    android:layout_height="36dp"
                    android:text="âš™ï¸ Settings"
                    android:textColor="#FFFFFF"
                    android:background="@android:color/transparent"
                    android:minWidth="0dp"
                    android:minHeight="0dp"/>
            </LinearLayout>

            <!-- Settings Panel (collapsible) -->
            <ScrollView
                android:id="@+id/settingsPanel"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:visibility="gone"
                android:background="#F5F5F5">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:padding="12dp">

                    <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                        android:text="âš™ï¸ Settings" android:textSize="16sp" android:textStyle="bold"
                        android:layout_marginBottom="8dp"/>

                    <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                        android:text="Ollama URL"/>
                    <EditText android:id="@+id/etOllamaUrl"
                        android:layout_width="match_parent" android:layout_height="wrap_content"
                        android:inputType="textUri" android:singleLine="true"/>

                    <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                        android:text="Mode" android:layout_marginTop="4dp"/>
                    <RadioGroup
                        android:id="@+id/groupMode"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal">
                        <RadioButton
                            android:id="@+id/radioModeNormal"
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:text="Normal"
                            android:checked="true"/>
                        <RadioButton
                            android:id="@+id/radioModeChatter"
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:text="Chatter"/>
                    </RadioGroup>

                    <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                        android:text="History Limit" android:layout_marginTop="4dp"/>
                    <EditText android:id="@+id/etHistoryLimit"
                        android:layout_width="match_parent" android:layout_height="wrap_content"
                        android:inputType="number" android:singleLine="true"/>

                    <Switch android:id="@+id/switchStreaming"
                        android:layout_width="match_parent" android:layout_height="wrap_content"
                        android:text="Streaming" android:checked="true" android:layout_marginTop="8dp"/>

                    <Switch android:id="@+id/switchTts"
                        android:layout_width="match_parent" android:layout_height="wrap_content"
                        android:text="Text-to-Speech" android:layout_marginTop="4dp"/>

                    <Switch android:id="@+id/switchVoiceInput"
                        android:layout_width="match_parent" android:layout_height="wrap_content"
                        android:text="Voice Input (on empty send)" android:layout_marginTop="4dp"/>

                    <Switch android:id="@+id/switchAutoVoiceInput"
                        android:layout_width="match_parent" android:layout_height="wrap_content"
                        android:text="Auto Voice Input (after response)" android:layout_marginTop="4dp"/>

                    <Switch android:id="@+id/switchWebSearch"
                        android:layout_width="match_parent" android:layout_height="wrap_content"
                        android:text="Web Search" android:layout_marginTop="4dp"/>

                    <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                        android:text="Web Search API URL" android:layout_marginTop="4dp"/>
                    <EditText android:id="@+id/etWebSearchUrl"
                        android:layout_width="match_parent" android:layout_height="wrap_content"
                        android:inputType="textUri" android:singleLine="true"/>

                    <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                        android:text="Web Search API Key" android:layout_marginTop="4dp"/>
                    <EditText android:id="@+id/etWebSearchApiKey"
                        android:layout_width="match_parent" android:layout_height="wrap_content"
                        android:inputType="textPassword" android:singleLine="true"/>

                    <Switch android:id="@+id/switchDebug"
                        android:layout_width="match_parent" android:layout_height="wrap_content"
                        android:text="Debug Mode" android:layout_marginTop="8dp"/>

                    <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                        android:text="Chatter Interval (sec)" android:layout_marginTop="4dp"/>
                    <EditText android:id="@+id/etAutoChatterSeconds"
                        android:layout_width="match_parent" android:layout_height="wrap_content"
                        android:inputType="number" android:singleLine="true"/>

                    <RadioGroup
                        android:id="@+id/tabGroup"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal"
                        android:layout_marginTop="8dp">
                        <RadioButton
                            android:id="@+id/tabBase"
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:text="Base"
                            android:checked="true"/>
                        <RadioButton
                            android:id="@+id/tabChatter"
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:text="Chatter Partner"/>
                    </RadioGroup>

                    <LinearLayout
                        android:id="@+id/baseSettingsGroup"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical"
                        android:layout_marginTop="4dp">

                        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                            android:text="Base Settings" android:textStyle="bold" android:layout_marginTop="4dp"/>

                        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                            android:text="Name" android:layout_marginTop="4dp"/>
                        <EditText android:id="@+id/etBaseName"
                            android:layout_width="match_parent" android:layout_height="wrap_content"
                            android:inputType="text" android:singleLine="true"/>

                        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                            android:text="Model" android:layout_marginTop="4dp"/>
                        <Spinner android:id="@+id/spinnerModel"
                            android:layout_width="match_parent" android:layout_height="wrap_content"/>

                        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                            android:text="Speech Language" android:layout_marginTop="4dp"/>
                        <EditText android:id="@+id/etSpeechLang"
                            android:layout_width="match_parent" android:layout_height="wrap_content"
                            android:inputType="text" android:singleLine="true"/>

                        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                            android:text="Speech Rate" android:layout_marginTop="4dp"/>
                        <EditText android:id="@+id/etSpeechRate"
                            android:layout_width="match_parent" android:layout_height="wrap_content"
                            android:inputType="numberDecimal" android:singleLine="true"/>

                        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                            android:text="Speech Pitch" android:layout_marginTop="4dp"/>
                        <EditText android:id="@+id/etSpeechPitch"
                            android:layout_width="match_parent" android:layout_height="wrap_content"
                            android:inputType="numberDecimal" android:singleLine="true"/>

                        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                            android:text="System Prompt" android:layout_marginTop="4dp"/>
                        <EditText android:id="@+id/etSystemPrompt"
                            android:layout_width="match_parent" android:layout_height="wrap_content"
                            android:inputType="textMultiLine" android:minLines="2"/>

                        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                            android:text="Avatar Images" android:textStyle="bold" android:layout_marginTop="8dp"/>

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:gravity="center_vertical"
                            android:layout_marginTop="4dp">
                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="c0 BG"/>
                            <TextView
                                android:id="@+id/tvC0Filename"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:layout_marginStart="8dp"
                                android:text="(default)"
                                android:textSize="12sp"
                                android:ellipsize="middle"
                                android:singleLine="true"/>
                            <Button
                                android:id="@+id/btnPickC0"
                                android:layout_width="wrap_content"
                                android:layout_height="36dp"
                                android:text="Select"
                                android:minWidth="0dp"
                                android:minHeight="0dp"/>
                            <Button
                                android:id="@+id/btnClearC0"
                                android:layout_width="wrap_content"
                                android:layout_height="36dp"
                                android:text="Clear"
                                android:minWidth="0dp"
                                android:minHeight="0dp"
                                android:layout_marginStart="4dp"/>
                        </LinearLayout>

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:gravity="center_vertical"
                            android:layout_marginTop="4dp">
                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="c1 Base"/>
                            <TextView
                                android:id="@+id/tvC1Filename"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:layout_marginStart="8dp"
                                android:text="(default)"
                                android:textSize="12sp"
                                android:ellipsize="middle"
                                android:singleLine="true"/>
                            <Button
                                android:id="@+id/btnPickC1"
                                android:layout_width="wrap_content"
                                android:layout_height="36dp"
                                android:text="Select"
                                android:minWidth="0dp"
                                android:minHeight="0dp"/>
                            <Button
                                android:id="@+id/btnClearC1"
                                android:layout_width="wrap_content"
                                android:layout_height="36dp"
                                android:text="Clear"
                                android:minWidth="0dp"
                                android:minHeight="0dp"
                                android:layout_marginStart="4dp"/>
                        </LinearLayout>

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:gravity="center_vertical"
                            android:layout_marginTop="4dp">
                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="c2 Blink"/>
                            <TextView
                                android:id="@+id/tvC2Filename"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:layout_marginStart="8dp"
                                android:text="(default)"
                                android:textSize="12sp"
                                android:ellipsize="middle"
                                android:singleLine="true"/>
                            <Button
                                android:id="@+id/btnPickC2"
                                android:layout_width="wrap_content"
                                android:layout_height="36dp"
                                android:text="Select"
                                android:minWidth="0dp"
                                android:minHeight="0dp"/>
                            <Button
                                android:id="@+id/btnClearC2"
                                android:layout_width="wrap_content"
                                android:layout_height="36dp"
                                android:text="Clear"
                                android:minWidth="0dp"
                                android:minHeight="0dp"
                                android:layout_marginStart="4dp"/>
                        </LinearLayout>

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:gravity="center_vertical"
                            android:layout_marginTop="4dp">
                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="c3 Talk"/>
                            <TextView
                                android:id="@+id/tvC3Filename"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:layout_marginStart="8dp"
                                android:text="(default)"
                                android:textSize="12sp"
                                android:ellipsize="middle"
                                android:singleLine="true"/>
                            <Button
                                android:id="@+id/btnPickC3"
                                android:layout_width="wrap_content"
                                android:layout_height="36dp"
                                android:text="Select"
                                android:minWidth="0dp"
                                android:minHeight="0dp"/>
                            <Button
                                android:id="@+id/btnClearC3"
                                android:layout_width="wrap_content"
                                android:layout_height="36dp"
                                android:text="Clear"
                                android:minWidth="0dp"
                                android:minHeight="0dp"
                                android:layout_marginStart="4dp"/>
                        </LinearLayout>

                    </LinearLayout>

                    <LinearLayout
                        android:id="@+id/chatterSettingsGroup"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical"
                        android:layout_marginTop="4dp"
                        android:visibility="gone">

                        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                            android:text="Chatter Partner Settings" android:textStyle="bold" android:layout_marginTop="4dp"/>

                        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                            android:text="Name" android:layout_marginTop="4dp"/>
                        <EditText android:id="@+id/etChatterName"
                            android:layout_width="match_parent" android:layout_height="wrap_content"
                            android:inputType="text" android:singleLine="true"/>

                        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                            android:text="Model" android:layout_marginTop="4dp"/>
                        <Spinner android:id="@+id/spinnerChatterModel"
                            android:layout_width="match_parent" android:layout_height="wrap_content"/>

                        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                            android:text="Speech Language" android:layout_marginTop="4dp"/>
                        <EditText android:id="@+id/etChatterSpeechLang"
                            android:layout_width="match_parent" android:layout_height="wrap_content"
                            android:inputType="text" android:singleLine="true"/>

                        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                            android:text="Speech Rate" android:layout_marginTop="4dp"/>
                        <EditText android:id="@+id/etChatterSpeechRate"
                            android:layout_width="match_parent" android:layout_height="wrap_content"
                            android:inputType="numberDecimal" android:singleLine="true"/>

                        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                            android:text="Speech Pitch" android:layout_marginTop="4dp"/>
                        <EditText android:id="@+id/etChatterSpeechPitch"
                            android:layout_width="match_parent" android:layout_height="wrap_content"
                            android:inputType="numberDecimal" android:singleLine="true"/>

                        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                            android:text="System Prompt" android:layout_marginTop="4dp"/>
                        <EditText android:id="@+id/etChatterSystemPrompt"
                            android:layout_width="match_parent" android:layout_height="wrap_content"
                            android:inputType="textMultiLine" android:minLines="2"/>

                        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                            android:text="Avatar Images" android:textStyle="bold" android:layout_marginTop="8dp"/>

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:gravity="center_vertical"
                            android:layout_marginTop="4dp">
                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="c0 BG"/>
                            <TextView
                                android:id="@+id/tvChatterC0Filename"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:layout_marginStart="8dp"
                                android:text="(default)"
                                android:textSize="12sp"
                                android:ellipsize="middle"
                                android:singleLine="true"/>
                            <Button
                                android:id="@+id/btnPickChatterC0"
                                android:layout_width="wrap_content"
                                android:layout_height="36dp"
                                android:text="Select"
                                android:minWidth="0dp"
                                android:minHeight="0dp"/>
                            <Button
                                android:id="@+id/btnClearChatterC0"
                                android:layout_width="wrap_content"
                                android:layout_height="36dp"
                                android:text="Clear"
                                android:minWidth="0dp"
                                android:minHeight="0dp"
                                android:layout_marginStart="4dp"/>
                        </LinearLayout>

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:gravity="center_vertical"
                            android:layout_marginTop="4dp">
                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="c1 Base"/>
                            <TextView
                                android:id="@+id/tvChatterC1Filename"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:layout_marginStart="8dp"
                                android:text="(default)"
                                android:textSize="12sp"
                                android:ellipsize="middle"
                                android:singleLine="true"/>
                            <Button
                                android:id="@+id/btnPickChatterC1"
                                android:layout_width="wrap_content"
                                android:layout_height="36dp"
                                android:text="Select"
                                android:minWidth="0dp"
                                android:minHeight="0dp"/>
                            <Button
                                android:id="@+id/btnClearChatterC1"
                                android:layout_width="wrap_content"
                                android:layout_height="36dp"
                                android:text="Clear"
                                android:minWidth="0dp"
                                android:minHeight="0dp"
                                android:layout_marginStart="4dp"/>
                        </LinearLayout>

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:gravity="center_vertical"
                            android:layout_marginTop="4dp">
                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="c2 Blink"/>
                            <TextView
                                android:id="@+id/tvChatterC2Filename"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:layout_marginStart="8dp"
                                android:text="(default)"
                                android:textSize="12sp"
                                android:ellipsize="middle"
                                android:singleLine="true"/>
                            <Button
                                android:id="@+id/btnPickChatterC2"
                                android:layout_width="wrap_content"
                                android:layout_height="36dp"
                                android:text="Select"
                                android:minWidth="0dp"
                                android:minHeight="0dp"/>
                            <Button
                                android:id="@+id/btnClearChatterC2"
                                android:layout_width="wrap_content"
                                android:layout_height="36dp"
                                android:text="Clear"
                                android:minWidth="0dp"
                                android:minHeight="0dp"
                                android:layout_marginStart="4dp"/>
                        </LinearLayout>

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:gravity="center_vertical"
                            android:layout_marginTop="4dp">
                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="c3 Talk"/>
                            <TextView
                                android:id="@+id/tvChatterC3Filename"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:layout_marginStart="8dp"
                                android:text="(default)"
                                android:textSize="12sp"
                                android:ellipsize="middle"
                                android:singleLine="true"/>
                            <Button
                                android:id="@+id/btnPickChatterC3"
                                android:layout_width="wrap_content"
                                android:layout_height="36dp"
                                android:text="Select"
                                android:minWidth="0dp"
                                android:minHeight="0dp"/>
                            <Button
                                android:id="@+id/btnClearChatterC3"
                                android:layout_width="wrap_content"
                                android:layout_height="36dp"
                                android:text="Clear"
                                android:minWidth="0dp"
                                android:minHeight="0dp"
                                android:layout_marginStart="4dp"/>
                        </LinearLayout>

                    </LinearLayout>

                    <!-- Help/Privacy/Rights Section -->
                    <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                        android:text="Information" android:textStyle="bold" android:layout_marginTop="16dp"/>

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal"
                        android:layout_marginTop="8dp">
                        <Button
                            android:id="@+id/btnHelp"
                            android:layout_width="0dp"
                            android:layout_weight="1"
                            android:layout_height="wrap_content"
                            android:text="Help"/>
                        <Button
                            android:id="@+id/btnPrivacy"
                            android:layout_width="0dp"
                            android:layout_weight="1"
                            android:layout_height="wrap_content"
                            android:text="Privacy"
                            android:layout_marginStart="4dp"/>
                        <Button
                            android:id="@+id/btnRights"
                            android:layout_width="0dp"
                            android:layout_weight="1"
                            android:layout_height="wrap_content"
                            android:text="Rights"
                            android:layout_marginStart="4dp"/>
                    </LinearLayout>

                </LinearLayout>
            </ScrollView>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/chatPanel"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:orientation="vertical"
            android:layout_margin="12dp"
            android:background="@drawable/chat_panel_bg"
            android:padding="12dp">

            <FrameLayout
                android:layout_width="match_parent"
                android:layout_height="0dp"
                android:layout_weight="1">

                <!-- Chat Messages -->
                <ScrollView
                    android:id="@+id/scrollView"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:fillViewport="true"
                    android:paddingTop="32dp">

                    <LinearLayout
                        android:id="@+id/messageContainer"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical"/>
                </ScrollView>

                <LinearLayout
                    android:id="@+id/chatDragArea"
                    android:layout_width="match_parent"
                    android:layout_height="32dp"
                    android:layout_gravity="top"
                    android:gravity="center"
                    android:clickable="true"
                    android:focusable="true">
                    <View
                        android:id="@+id/chatDragHandle"
                        android:layout_width="40dp"
                        android:layout_height="4dp"
                        android:background="#CCCCCC"/>
                </LinearLayout>
            </FrameLayout>

            <!-- Input Area -->
            <LinearLayout
                android:id="@+id/inputBubble"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:layout_marginTop="8dp"
                android:padding="8dp"
                android:background="@drawable/chat_input_bg">

                <EditText
                    android:id="@+id/etInput"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:hint="Enter message"
                    android:background="@android:color/transparent"/>

                <Button
                    android:id="@+id/btnSend"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Send"
                    android:layout_marginStart="4dp"/>
            </LinearLayout>
        </LinearLayout>
    </LinearLayout>

</FrameLayout>
